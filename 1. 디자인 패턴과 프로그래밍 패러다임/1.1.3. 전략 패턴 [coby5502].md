# 1.1.3 ì „ëµ íŒ¨í„´

ì „ëµ(Strategy) íŒ¨í„´ì€ **ì•Œê³ ë¦¬ì¦˜ì„ ìº¡ìŠí™”í•´ì„œ ëŸ°íƒ€ì„ì— êµì²´í•  ìˆ˜ ìˆë„ë¡** ì„¤ê³„í•˜ëŠ” ë””ìì¸ íŒ¨í„´

### ì „ëµ íŒ¨í„´ êµ¬ì„± ìš”ì†Œ

| êµ¬ì„±ìš”ì†Œ | ì„¤ëª… |
| --- | --- |
| `Strategy` ì¸í„°í˜ì´ìŠ¤ | ê³µí†µ ì•Œê³ ë¦¬ì¦˜ì„ ì •ì˜í•œ ì¸í„°í˜ì´ìŠ¤ |
| `ConcreteStrategy` í´ë˜ìŠ¤ | ì‹¤ì œ ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•œ í´ë˜ìŠ¤ |
| `Context` í´ë˜ìŠ¤ | ì „ëµì„ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤, ëŸ°íƒ€ì„ì— ì „ëµì„ ë°”ê¿€ ìˆ˜ ìˆìŒ |

### êµ¬ì¡° ì˜ˆì‹œ

### 1. `Strategy` ì¸í„°í˜ì´ìŠ¤

```java
interface PaymentStrategy {
    void pay(int amount);
}
```

### 2. `ConcreteStrategy` êµ¬í˜„ì²´

```java
class KAKAOCardStrategy implements PaymentStrategy {
    private String name, cardNumber, cvv, expiry;

    public KAKAOCardStrategy(String name, String cardNumber, String cvv, String expiry) {
        this.name = name;
        this.cardNumber = cardNumber;
        this.cvv = cvv;
        this.expiry = expiry;
    }

    @Override
    public void pay(int amount) {
        System.out.println(amount + " paid using KAKAOCard.");
    }
}

class LUNACardStrategy implements PaymentStrategy {
    private String email, password;

    public LUNACardStrategy(String email, String password) {
        this.email = email;
        this.password = password;
    }

    @Override
    public void pay(int amount) {
        System.out.println(amount + " paid using LUNACard.");
    }
}
```

### 3. `Context` í´ë˜ìŠ¤

```java
class ShoppingCart {
    private List<Item> items = new ArrayList<>();

    public void addItem(Item item) {
        items.add(item);
    }

    public int calculateTotal() {
        return items.stream().mapToInt(Item::getPrice).sum();
    }

    public void pay(PaymentStrategy strategy) {
        int amount = calculateTotal();
        strategy.pay(amount);
    }
}
```

### 4. `Item` í´ë˜ìŠ¤

```java
class Item {
    private String name;
    private int price;

    public Item(String name, int price) {
        this.name = name;
        this.price = price;
    }

    public int getPrice() {
        return price;
    }
}
```

### 5. ì‹¤í–‰ ì˜ˆì‹œ

```java
public class HelloWorld {
    public static void main(String[] args) {
        ShoppingCart cart = new ShoppingCart();
        cart.addItem(new Item("kundolA", 100));
        cart.addItem(new Item("kundolB", 300));

        cart.pay(new LUNACardStrategy("email@example.com", "password123"));
        cart.pay(new KAKAOCardStrategy("Kim", "1111-2222", "123", "12/26"));
    }
}
```

---

### ì „ëµ íŒ¨í„´ì˜ ì¥ì 

- **OCP(Open-Closed Principle)** ì¤€ìˆ˜ â†’ ìƒˆë¡œìš´ ì „ëµì„ ì¶”ê°€í•´ë„ ê¸°ì¡´ ì½”ë“œëŠ” ë³€ê²½í•  í•„ìš” ì—†ìŒ
- ëŸ°íƒ€ì„ì— **í–‰ìœ„ë¥¼ ìœ ì—°í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥**
- ì½”ë“œ ì¤‘ë³µ ë°©ì§€, ê´€ì‹¬ì‚¬ ë¶„ë¦¬

### ì–¸ì œ ì“°ë©´ ì¢‹ì„ê¹Œ?

- ê°™ì€ ë™ì‘ì„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆì„ ë•Œ (ì˜ˆ: ê²°ì œ ë°©ì‹, ì •ë ¬ ë°©ì‹, ì•”í˜¸í™” ë°©ì‹ ë“±)
- ì¡°ê±´ë¬¸ìœ¼ë¡œ ì „ëµì„ ë¶„ê¸° ì²˜ë¦¬í•˜ëŠ” ì½”ë“œê°€ ë§ì„ ë•Œ

---

### ë¬¸ì œ ìƒí™©: ì¡°ê±´ë¬¸ ë¶„ê¸° ì½”ë“œê°€ ë§ì€ ê²½ìš°

ì˜ˆë¥¼ ë“¤ì–´ ê²°ì œ ë°©ì‹ì— ë”°ë¼ ì‹¤í–‰ íë¦„ì´ ë°”ë€ŒëŠ” ì½”ë“œë¥¼ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ì´ë ‡ê²Œ ë¨:

```java
public void pay(String type, int amount) {
    if (type.equals("kakao")) {
        // kakao ê²°ì œ ì²˜ë¦¬
    } else if (type.equals("luna")) {
        // luna ê²°ì œ ì²˜ë¦¬
    } else if (type.equals("naver")) {
        // naver ê²°ì œ ì²˜ë¦¬
    }
}
```

---

### âŒ ë¬¸ì œì 

1. **OCP ìœ„ë°˜**
    - ìƒˆë¡œìš´ ê²°ì œ ë°©ì‹ì´ ìƒê¸¸ ë•Œë§ˆë‹¤ `if-else` ë˜ëŠ” `switch`ë¬¸ì„ **ì§ì ‘ ìˆ˜ì •**í•´ì•¼ í•¨ â†’ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
2. **SRP ìœ„ë°˜**
    - ê²°ì œ ë°©ì‹ë³„ ë¡œì§ì´ **í•œ ë©”ì„œë“œì— ë‹¤ ë­‰ì³ìˆìŒ** â†’ ì±…ì„ì´ ì»¤ì§
3. **ì¬ì‚¬ìš©ì„± ë‚®ìŒ**
    - ê° ë¡œì§ì„ ì¬ì‚¬ìš©í•˜ê±°ë‚˜ í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€
4. **ê°€ë…ì„±/ìœ ì§€ë³´ìˆ˜ì„± ì €í•˜**
    - ë¶„ê¸° ì¡°ê±´ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ì½”ë“œê°€ **ë³µì¡í•´ì§€ê³  ì—ëŸ¬ ê°€ëŠ¥ì„± ì¦ê°€**

---

### âœ… í•´ê²°ì±…: ì „ëµ íŒ¨í„´ ì‚¬ìš©

```java
Map<String, PaymentStrategy> strategies = Map.of(
    "kakao", new KAKAOCardStrategy(...),
    "luna", new LUNACardStrategy(...),
    ...
);

PaymentStrategy strategy = strategies.get(type);
strategy.pay(amount);
```

- ì¡°ê±´ë¬¸ ì—†ì´ ì „ëµ ê°ì²´ë§Œ ë°”ê¾¸ë©´ ë¨
- ìƒˆë¡œìš´ ì „ëµì„ ì¶”ê°€í•  ë•Œ ê¸°ì¡´ ì½”ë“œëŠ” **ê±´ë“œë¦´ í•„ìš” ì—†ìŒ**
- ë¡œì§ì´ **ìº¡ìŠí™”**ë˜ì–´ ìˆê³ , ê° ì „ëµì€ ë…ë¦½ì ìœ¼ë¡œ **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥**

ì „ëµ íŒ¨í„´ì€

**"ì¡°ê±´ë¬¸ì„ ê°ì²´ë¡œ ëŒ€ì²´í•˜ëŠ” ë°©ë²•"** ì¤‘ í•˜ë‚˜ë¡œ,

ì¡°ê±´ ë¶„ê¸°ê°€ ë§ì€ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ë¦¬íŒ©í† ë§í•  ìˆ˜ ìˆëŠ” í›Œë¥­í•œ íŒ¨í„´

---

## OCP (Open-Closed Principle)

> â€œì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆì–´ì•¼ í•˜ê³ , ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.â€
> 

### ğŸ”¹ ì˜ë¯¸

- ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ **í™•ì¥ ê°€ëŠ¥**í•´ì•¼ í•˜ê³ 
- ê¸°ì¡´ ì½”ë“œë¥¼ **ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„** ë™ì‘í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ì›ì¹™

### ğŸ”¹ ì˜ëª»ëœ ì˜ˆì‹œ

```java
public class Notification {
    public void send(String type) {
        if (type.equals("email")) {
            // ì´ë©”ì¼ ì „ì†¡
        } else if (type.equals("sms")) {
            // SMS ì „ì†¡
        }
    }
}
```

- ì—¬ê¸°ì„œ ìƒˆë¡œìš´ ì•Œë¦¼ ë°©ì‹(ex. push)ì´ ìƒê¸°ë©´ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•¨ â†’ OCP ìœ„ë°˜

### ğŸ”¹ OCP ì¤€ìˆ˜í•œ ì˜ˆì‹œ (ì „ëµ íŒ¨í„´ í™œìš©)

```java
interface Sender {
    void send();
}

class EmailSender implements Sender {
    public void send() {
        System.out.println("ì´ë©”ì¼ ì „ì†¡");
    }
}

class SmsSender implements Sender {
    public void send() {
        System.out.println("SMS ì „ì†¡");
    }
}

public class Notification {
    private Sender sender;

    public Notification(Sender sender) {
        this.sender = sender;
    }

    public void notifyUser() {
        sender.send();
    }
}
```

- ìƒˆë¡œìš´ ì „ì†¡ ë°©ì‹ ì¶”ê°€í•  ë• `Sender` êµ¬í˜„ì²´ë§Œ ë§Œë“¤ë©´ ë¨ â†’ ê¸°ì¡´ `Notification` ìˆ˜ì • âŒ

---

## SRP (Single Responsibility Principle)

> â€œí•˜ë‚˜ì˜ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.â€
> 

### ğŸ”¹ ì˜ë¯¸

- í´ë˜ìŠ¤ëŠ” **ë‹¨ í•˜ë‚˜ì˜ ë³€ê²½ ì´ìœ ë§Œ** ê°€ì ¸ì•¼ í•¨
- ì¦‰, **í•˜ë‚˜ì˜ ì—­í• ë§Œ** í•˜ë„ë¡ ì„¤ê³„í•´ì•¼ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›€

### ğŸ”¹ ì˜ëª»ëœ ì˜ˆì‹œ

```java
public class Report {
    public void generate() {
        // ë³´ê³ ì„œ ìƒì„±
    }

    public void saveToFile() {
        // íŒŒì¼ ì €ì¥
    }

    public void print() {
        // ì¶œë ¥
    }
}
```

- ìƒì„±/ì €ì¥/ì¶œë ¥ì´ í•œ í´ë˜ìŠ¤ì— ì„ì—¬ ìˆìŒ â†’ ì±…ì„ì´ ë§ìŒ â†’ SRP ìœ„ë°˜

### ğŸ”¹ SRP ì¤€ìˆ˜í•œ ì˜ˆì‹œ

```java
class ReportGenerator {
    public void generate() {
        // ë³´ê³ ì„œ ìƒì„±
    }
}

class FileSaver {
    public void save() {
        // íŒŒì¼ ì €ì¥
    }
}

class Printer {
    public void print() {
        // ì¶œë ¥
    }
}
```

- ê° í´ë˜ìŠ¤ê°€ í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§ â†’ ìœ ì§€ë³´ìˆ˜, í…ŒìŠ¤íŠ¸, í™•ì¥ í¸í•¨