## 🔹싱글톤 패턴이란?

하나의 클래스에 오직 하나의 인스턴스만 가지는 패턴입니다.

## 🔹싱글톤 패턴을 사용하는 이유는?

오직 하나의 인스턴스만 가지기에 속성들을 어떤 클래스에서도 공유할 수 있다는 점에 사용합니다.

예를 들어 DB의 커넥트하기 위한 함수 같은 경우 동일한 DB정보를 가지기에 인스턴스를 여러개 생성 할 필요 가 없습니다. 그래서 싱글톤 패턴을 사용하여 인스턴스 생성 비용을 줄일 수 있습니다.

## 🔹단점은 없나요?

단점도 있습니다.

- 동일한 인스턴스를 사용하기 때문에 전역 상태가 됩니다. 쉽게 접근 할 수 있다는 장점이 있지만 코드의 가독성을 떨어뜨리고, 멀티스레드 환경에서 데이터 경쟁 문제를 일으킬 수 있습니다.
- 특정 클래스에 강하게 결합되어 있어, 해당 클래스를 변경하면 싱글톤을 사용하는 다른 모든 클래스에 영향을 줄 수 있습니다. 이는 코드의 유연성과 재사용성을 감소시킵니다. 이 때 의존성 주입(DI, Dependency Injection)을 통해 모듈 간의 결합을 조금 더 느슨하게 만들어 해결할 수 있습니다.
- 전역 상태를 사용하므로, 단위 테스트를 어렵게 만듭니다. 테스트 환경에서 싱글톤의 상태를 격리하기 어렵고, 예측 가능한 방식으로 테스트하기가 복잡해집니다.
- 객체 생명주기를 직접 관리하기 어렵습니다. 객체가 언제 생성되고 소멸되는지 예측하기 어려워 리소스 관리에 문제가 발생할 수 있습니다.

## 🔹싱글톤 패턴의 구현 방법

```java
// Singleton.java
class Singleton {
	private static Singleton instance = new Singleton();
	private  Singleton() { }
	public static Singleton getInstance() {
		return instance;
	}
}

// Main.java
class Main {
	public static void main(String[] args) {
		Singleton s = Singleton.getInstance();
	}
}
```

## 🔹싱글톤 패턴과 의존성 주입(DI)의 관계

의존성 주입은 객체 간의 결합도를 낮추고 테스트 가능성을 높이기 위해 자주 사용하는 설계 원칙입니다.

이 DI 컨테이너는 객체를 직접 생성하지 않고 외부에서 주입받게 함으로써 객체 생명주기 관리와 의존성 해결을 담당합니다.

싱글톤 패턴과 DI는 모두 **”하나의 인스턴스를 공유”**한다는 점에서 유사하지만, 접근 방식과 제어 흐름이 다릅니다.

### 🔹 차이점

| 항목 | 싱글톤 패턴 | DI 컨테이너 싱글톤 |
| --- | --- | --- |
| 생성 책임 | 클래스 내부에서 직접 제어 | 컨테이너(Spring 등)가 제어 |
| 코드 상 구현 | `private constructor`, `static getInstance()` 등 | 클래스는 일반적이고, 어노테이션(`@Component`)이나 설정으로 제어 |
| 테스트 용이성 | Mock이 어려움 | 인터페이스 기반 주입으로 Mock 용이 |
| 유연성 | 재사용, 변경 어려움 | 주입 대상만 바꾸면 됨 |

### 🔹 결론

> 싱글톤이 필요한 경우에도, 직접 구현하기보다는 DI 컨테이너의 싱글톤 범위를 활용하는 것이 현대적인 설계 방식이다.
>