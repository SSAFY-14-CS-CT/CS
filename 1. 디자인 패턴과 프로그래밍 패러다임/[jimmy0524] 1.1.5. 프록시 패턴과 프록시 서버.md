# 1.1.5 프록시 패턴과 프록시 서버

## 프록시 패턴

대상 객체에 접근하기 전 그 접근에 대한 흐름을 가로채 대상 객체 앞단의 인터페이스 역할을 하는 디자인 패턴

> 프록시란? <br>
> 어떠한 대상의 기본적인 동작의 작업을 가로챌 수 있는 객체를 뜻함
>

프록시 패턴은 다음과 같은 기능을 수행할 수 있다.

- 접근 제어 : 권한 확인과 인증 절차를 추가해 데이터나 기능에 제한된 접근만 허용
- 로깅 및 감사 : 요청과 결과를 기록하여 추후 보안 및 모니터링에 활용
- 캐싱 : 결과를 저장, 동일한 요청에 대해 성능을 높이고 불필요한 연산/트래픽을 줄임
- 지연 로딩(Lazy Loading) : 무거운 객체는 실제로 필요할 때까지 생성 미루기
- 네트워크/분산 객체 관리 : 네트워크를 통한 원격 객체 제어, 네트워크 비용 감소

이러한 프록시 패턴은 프록시 객체와 프록시 서버에서 주로 사용된다.

## 프록시 객체

**프록시 객체**란, 실제 객체 앞단에 중간자처럼 배치되어, 객체에 대한 접근이나 메서드 호출을 가로채 추가적인 작업(로깅, 보안, 캐싱 등)을 수행하는 객체입니다.

## 프록시 서버

서버와 클라이언트 사이에서 클라이언트가 자신을 통해 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해주는 컴퓨터 시스템이나 응용 프로그램

- 트래픽 관리 및 보안
    - IP 우회, 실제 서버 위치/포트 은폐를 통해 보안 강화 및 익명성 보장
    - 웹 방화벽 역할 : SQL 인젝션 등 각종 웹 공격 탐지 및 차단
    - DDOS 공격 저지 : CloudFlare 같은 서비스가 대량의 악성 트래픽을 차단
- 성능 최적화
    - 캐싱 / 로드밸런싱을 통한 트래픽 분산과 병목 완화
    - SSL / TLS 오프로드로 백엔드 리소스 절감
- 접근 통제와 로그 관리
    - 콘텐츠 필터링, 접근 기록 저장
    - API 게이트웨이 기능으로 인증/인가, 요금제 적용 등 복합적 관리

### nginx

- 비동기 이벤트 기반의 구조와 다수의 연결을 효과적으로 처리가능한 웹서버
- Node.js 서버 앞단의 프록시 서버로 활용됨
- Node.js의 버퍼 오버플로우 취약점을 예방하기 위함
- 익명 사용자가 직접적으로 서버에 접근하는 것을 차단하고, 간접적으로 한 단계를 더 거치게 만들어서 보안을 강화할 수 있음 (nginx를 프록시 서버로 둬서 실제 포트를 숨길 수 있음)

### CloudFlare

- CDN 서비스 (사용자가 인터넷에 접속하는 곳과 가까운 곳에서 콘텐츠를 캐싱 또는 배포하는 서버 네트워크로 이를 통해 사용자가 웹 서버로부터 콘텐츠를 다운로드하는 시간을 줄일 수 있음)
- 웹 서버 앞단에 프록시 서버로 두어 DDOS(사용자가 접속하는 것이 아닌 시스템을 통해 오는 트래픽을 자동으로 차단) 공격 방어, HTTPS 구축에 쓰임
- 의심스러운 트래픽을 판단하여 일정부분 막아주는 역할 수행

### CORS와 프론트엔드 서버

- **CORS**(Cross-Origin Resource Sharing)는 브라우저가 다른 오리진(프로토콜, 호스트, 포트가 다른 경우)에서 오는 리소스 요청을 기본적으로 차단하는 보안 정책이다.
- 이를 해결하기 위해 **프론트엔드 개발 환경에서 자체적으로 프록시 서버를 두어** 백엔드와의 CORS 문제를 우회/해결하는 방법이 널리 쓰이고 있다.