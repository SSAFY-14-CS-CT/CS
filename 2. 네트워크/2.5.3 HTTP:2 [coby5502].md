# 2.5.3 HTTP/2

## 1. HTTP/2의 등장 배경

- HTTP/1.1은 **keep-alive**로 여러 요청을 한 연결에서 처리할 수 있었지만,
    
    리소스가 많을수록 요청 순서 때문에 지연(HOL Blocking) 문제가 발생.
    
- 또한 헤더가 무겁고 압축이 안 되어 **불필요한 대역폭 낭비**.
- 이를 해결하기 위해 HTTP/2가 등장.

---

## 2. HTTP/2의 주요 특징

### ✅ 멀티플렉싱 (Multiplexing)

- 하나의 TCP 연결에서 **여러 개의 스트림(Stream)을 병렬로 처리** 가능.
- HTTP/1.x는 순차적으로 요청-응답이 진행되어 HOL Blocking 발생.
    
    → HTTP/2는 **독립적인 스트림 단위 전송**으로 해결.
    
- 스트림 단위에서 패킷 손실이 발생해도 **다른 스트림은 영향 없음**.

👉 **면접 꼬리질문**

- Q: HTTP/1.1에서 HOL Blocking은 왜 발생하나요?
    
    A: 한 TCP 연결에서 요청을 순차적으로 처리해야 하므로, 앞 요청이 지연되면 뒤 요청도 지연됨.
    
- Q: HTTP/2 멀티플렉싱이 TCP 레벨 HOL Blocking도 해결하나요?
    
    A: 아니요, TCP 자체에서 발생하는 HOL Blocking은 남아있습니다. (HTTP/3에서 해결)
    

---

### ✅ 스트림 (Stream)

- **시간 순서대로 이어지는 데이터 흐름 단위**.
- 메시지를 작은 **프레임 단위**로 쪼개 송수신 후 재조립.
- 스트림 ID를 부여해 **병렬 요청/응답** 가능.
- HTTP/2는 **단일 TCP 연결**로 모든 리소스 송수신 가능.

👉 **면접 꼬리질문**

- Q: 스트림을 프레임 단위로 쪼개는 이유는?
    
    A: 병렬 송수신을 위해서. 프레임 단위로 데이터를 나누어 다른 스트림과 섞어서 보낼 수 있음.
    

---

### ✅ 헤더 압축 (HPACK)

- HTTP/1.x 헤더는 매 요청마다 중복된 정보를 전송(예: 쿠키, User-Agent).
- HTTP/2는 **HPACK**이라는 헤더 압축 방식을 사용.
- HPACK은 **허프만 코딩(Huffman Coding)**을 활용하여 효율적으로 압축.
    - 자주 등장하는 헤더 필드는 **Static/Dynamic 테이블에 저장**하여 재사용.
    - 전체 트래픽 크기 감소.

👉 **면접 꼬리질문**

- Q: 허프만 코딩 원리를 간단히 설명해보세요.
    
    A: 등장 빈도가 높은 문자는 짧은 비트로, 낮은 문자는 긴 비트로 인코딩하여 전체 데이터 크기를 줄임.
    

---

### ✅ 서버 푸시 (Server Push)

- 클라이언트가 요청하기 전에 서버가 **미리 리소스를 전송** 가능.
- 예: HTML 문서를 요청했을 때, 서버가 CSS/JS도 함께 푸시.
- 장점: 불필요한 RTT 절약 → 초기 로딩 속도 향상.
- 단점: 불필요한 리소스를 푸시하면 오히려 낭비.

👉 **면접 꼬리질문**

- Q: 서버 푸시가 항상 좋은 건가요?
    
    A: 아닙니다. 이미 캐시에 있는 리소스를 푸시하면 낭비가 발생할 수 있습니다.
    

---

## 3. HTTP/2의 장점 정리

- 멀티플렉싱 → HOL Blocking 해결(애플리케이션 레벨).
- HPACK 헤더 압축 → 대역폭 절약.
- 서버 푸시 → 초기 로딩 속도 향상.
- 단일 연결 → 연결 수 관리 비용 감소.

---

## 4. HTTP/2 한계

- TCP 기반이라 **TCP 레벨 HOL Blocking 문제는 여전히 존재**.
- 이를 근본적으로 해결하기 위해 **HTTP/3(QUIC 기반)** 등장.

👉 **꼬리질문**

- Q: HTTP/2와 HTTP/3의 가장 큰 차이는 무엇인가요?
    
    A: HTTP/2는 TCP 기반, HTTP/3는 UDP 기반(QUIC 사용) → TCP HOL Blocking 제거.
    

---

# 📝 요약 면접 포인트

- HTTP/1.1 한계 → HTTP/2 등장 배경.
- 멀티플렉싱으로 HOL Blocking 해결 방식.
- HPACK 헤더 압축 & 허프만 코딩.
- 서버 푸시 장점과 단점.
- TCP HOL Blocking 문제는 여전히 남음 → HTTP/3와의 연결.