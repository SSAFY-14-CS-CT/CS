# 2.5.3 HTTP/2

- **HTTP/1.x보다 지연 시간(latency)을 줄이고 응답 속도를 빠르게** 할 수 있다.
- **멀티플렉싱, 헤더 압축, 서버 푸시, 요청 우선순위 처리**를 지원한다.

### 1. 멀티플렉싱(Multiplexing)

- 하나의 TCP 연결 내에서 여러 스트림(stream)을 동시에 송수신 가능
    - 스트림 : 시간이 지남에 따라 사용할 수 있게 되는 일련의 데이터 요소를 가리키는 데이터 흐름
- 특정 스트림의 패킷 손실이 발생해도 **다른 스트림에는 영향이 없음**
- 데이터를 독립된 프레임으로 쪼개 송수신 → 수신 후 다시 조립
- HTTP/1.x에서 발생하던 **HOL(Head-of-Line) Blocking 문제 해결**

### 2. 헤더 압축(Header Compression)

- HTTP/1.x에서는 헤더 크기가 커서 전송 비용이 많음
- HTTP/2에서는 **HPACK 포맷**을 이용해 허프만 코딩(Huffman Coding)으로 압축
- 허프만 코딩: **빈도수가 높은 정보는 적은 비트, 낮은 정보는 많은 비트**를 사용하여 전체 데이터 크기 감소

### 3. 서버 푸시(Server Push)

- HTTP/1.1에서는 클라이언트 요청이 있어야 서버가 리소스를 전송
- HTTP/2에서는 **클라이언트 요청 없이 서버가 미리 리소스를 푸시 가능**
- 예: HTML을 요청할 때, CSS나 JS 파일을 서버가 미리 전송 → 브라우저 렌더링 속도 향상

## 📌 면접 예상 질문 & 답변

### 1️⃣ HTTP/2가 HTTP/1.1보다 개선된 점은 무엇인가요?

**답변**

HTTP/2는 **지연 시간(latency)을 줄이고 응답 속도를 빠르게** 하기 위해 등장했습니다.

핵심 기능은 **멀티플렉싱, 헤더 압축, 서버 푸시, 요청 우선순위**입니다.

---

### 2️⃣ HTTP/2의 멀티플렉싱(Multiplexing)은 무엇이며 왜 중요한가요?

**답변**

멀티플렉싱은 **하나의 TCP 연결에서 여러 요청과 응답을 동시에 송수신할 수 있는 기능**입니다.

HTTP/1.1에서는 **HOL(Head-of-Line) Blocking** 문제 때문에 앞 요청이 지연되면 뒤 요청도 기다려야 했지만, HTTP/2는 요청을 **독립된 프레임 단위로 쪼개 병렬 전송**하므로 이런 문제가 사라집니다.

---

### 3️⃣ HTTP/2의 멀티플렉싱은 HOL Blocking 문제를 완전히 해결했나요?

**답변**

애플리케이션 계층(HTTP)에서의 HOL Blocking은 해결했지만, **전송 계층(TCP) 레벨의 HOL Blocking은 여전히 존재**합니다.

즉, TCP 자체에서 패킷 손실이 발생하면 해당 패킷이 재전송될 때까지 뒤 패킷들도 대기해야 합니다.

이 한계는 이후 HTTP/3(QUIC, UDP 기반)에서 해결되었습니다.

---

### 4️⃣ HTTP/2에서 헤더 압축은 어떻게 동작하나요?

**답변**

HTTP/1.x는 쿠키 등 메타데이터 때문에 헤더 크기가 커서 전송 비용이 컸습니다.

HTTP/2는 **HPACK 포맷**을 사용해 **허프만 코딩**으로 헤더를 압축합니다.

허프만 코딩은 **자주 등장하는 값은 짧은 비트, 드물게 등장하는 값은 긴 비트**로 표현해 전체 크기를 줄입니다.

---

### 5️⃣ HTTP/2의 서버 푸시(Server Push)는 어떤 원리이고 장점은 무엇인가요?

**답변**

서버 푸시는 **클라이언트 요청 없이 서버가 리소스를 미리 전송**하는 기능입니다.

예를 들어, 브라우저가 HTML을 요청하면 서버가 CSS, JS 파일을 함께 푸시해 클라이언트가 별도 요청 없이 바로 사용할 수 있어 렌더링 속도가 빨라집니다.

---

### 6️⃣ 서버 푸시(Server Push)의 단점은 없나요?

**답변**

다음과 같은 단점이 있습니다.

- 불필요한 리소스를 미리 보내면 **네트워크 낭비** 발생
- 브라우저 캐시에 이미 있는 리소스를 다시 푸시하면 **중복 전송** 문제 발생

  이 때문에 최근에는 **HTTP/3와 함께 등장한 `103 Early Hints`** 같은 방식이 더 선호되기도 합니다.


---

### 7️⃣ HTTP/2의 요청 우선순위(Request Prioritization)는 무엇인가요?

**답변**

HTTP/2는 여러 요청이 동시에 처리될 때 **리소스 중요도에 따라 우선순위를 설정**할 수 있습니다.

예를 들어, CSS나 JS는 먼저 받아야 화면을 그릴 수 있으므로, 이미지보다 우선적으로 전송되도록 지정할 수 있습니다.